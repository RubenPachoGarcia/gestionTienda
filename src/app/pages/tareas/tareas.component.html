<div class="container p-4 bg-dark text-light rounded shadow mt-5">
  <h2 class="tareas">Tareas</h2>

  <div class="tareas">
    <input type="text" class="form-control input bg-dark text-light" placeholder="Nueva tarea" [(ngModel)]="nuevaTarea" style="max-width: 250px;" />
    <br>
    <select class="form-select input bg-dark text-light" [(ngModel)]="categoria" style="max-width: 200px;">
      <option value="Pendientes">Pendientes</option>
    </select>
    <br>
    <button class="btn btn-outline-primary btn-lg w-100 text-left" (click)="aniadirTarea()">AÃ±adir</button>
  </div>

  <ul class="list-group">
    @for (tarea of tareas; track $index) {
      <li class="list-group-item d-flex justify-content-between align-items-center bg-dark text-light border-info">
        <div>
          <input type="checkbox" class="form-check-input me-2" [checked]="tarea.completada" (change)="completarTarea(tarea.id, tarea.completada)" />
          <strong>{{ tarea.nombre }}</strong> - {{ tarea.categoria }}
        </div>
        <div>
          <button class="btn btn-outline-primary btn-lg w-100 text-left" (click)="editarTarea(tarea)">Modificar</button>
          <button class="btn btn-outline-primary btn-lg w-100 text-left" (click)="eliminarTarea(tarea.id)">Eliminar</button>
        </div>
      </li>
    }
  </ul>

  @if (tareaEditada) {
    <div class="mt-4">
      <h3 class="text-primary text-center">Editar Tarea</h3>
      <div class="d-flex flex-wrap justify-content-center">
        <input [(ngModel)]="tareaEditada.nombre" class="form-control bg-dark text-light border-info mx-2 mb-3" placeholder="Editar tarea" style="max-width: 250px;" />
        <select [(ngModel)]="tareaEditada.categoria" class="form-select bg-dark text-light border-info mx-2 mb-3" style="max-width: 200px;">
          <option value="Pendientes">Pendientes</option>
          <option value="Completadas">Completadas</option>
          <option value="No realizadas">No realizadas</option>
        </select>
      </div>
      <div class="text-center">
        <button class="btn btn-success mx-2" (click)="guardarModificaciones()">Guardar cambios</button>
        <button class="btn btn-secondary mx-2" (click)="tareaEditada = null">Cancelar</button>
      </div>
    </div>
  }
</div>
